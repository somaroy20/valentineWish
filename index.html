<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy Valentine's Day ğŸ’–</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Dancing+Script:wght@400;600;700&family=Tenor+Sans&display=swap" rel="stylesheet"/>
<style>
:root{
  --rose:#e8315a; --blush:#f7a8b8; --cream:#fff6f0;
  --deep:#120308; --ink:#1e0510; --gold:#c9962e;
  --velvet:#6b0f2e; --soft:#fde8ec;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
::-webkit-scrollbar{width:5px;}
::-webkit-scrollbar-track{background:var(--deep);}
::-webkit-scrollbar-thumb{background:var(--velvet);border-radius:3px;}
body{cursor:none;font-family:'Cormorant Garamond',serif;background:var(--deep);color:var(--cream);overflow-x:hidden;}

/* CURSOR */
#cur{position:fixed;pointer-events:none;z-index:99999;transform:translate(-50%,-50%);font-size:22px;transition:transform .12s;}

/* PROGRESS */
#prog{position:fixed;top:0;left:0;height:3px;width:0%;
  background:linear-gradient(90deg,var(--rose),var(--gold),var(--blush));
  z-index:9999;box-shadow:0 0 12px var(--rose);}

/* CANVAS */
#cvs{position:fixed;inset:0;pointer-events:none;z-index:0;}

/* â•â•â•â• PRELOADER â•â•â•â• */
#intro{
  position:fixed;inset:0;background:var(--deep);z-index:50000;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  transition:opacity 1.2s,transform 1.2s;
}
#intro.gone{opacity:0;transform:scale(1.08);pointer-events:none;}
.il-heart{font-size:5.5em;animation:throb 1s ease-in-out infinite;}
.il-text{font-family:'Dancing Script',cursive;font-size:2.2em;color:var(--blush);margin-top:22px;letter-spacing:3px;}
.il-bar{width:220px;height:3px;background:rgba(255,255,255,.1);border-radius:2px;margin-top:30px;overflow:hidden;}
.il-fill{height:100%;background:linear-gradient(90deg,var(--rose),var(--gold));border-radius:2px;animation:lbar 2.4s ease forwards;}
@keyframes lbar{from{width:0%;}to{width:100%;}}
@keyframes throb{0%,100%{transform:scale(1);}50%{transform:scale(1.28);}}

/* â•â•â•â• HERO â•â•â•â• */
.hero{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;z-index:1;}
.hbg{
  position:absolute;inset:0;
  background:
    radial-gradient(ellipse 72% 58% at 50% 45%,rgba(232,49,90,.28) 0%,transparent 68%),
    radial-gradient(ellipse 42% 36% at 12% 85%,rgba(107,15,46,.5) 0%,transparent 55%),
    radial-gradient(ellipse 38% 30% at 88% 18%,rgba(201,150,46,.18) 0%,transparent 55%),
    linear-gradient(155deg,#0d0205 0%,#1a040c 45%,#0e0107 100%);
}
.hbg::after{content:'';position:absolute;inset:0;opacity:.55;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");}
.rings{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;}
.ring{position:absolute;border-radius:50%;border:1px solid rgba(232,49,90,.13);}
.ring:nth-child(1){width:480px;height:480px;animation:spin 20s linear infinite;}
.ring:nth-child(2){width:780px;height:780px;border-color:rgba(201,150,46,.09);animation:spin 36s linear reverse infinite;}
.ring:nth-child(3){width:1100px;height:1100px;border-color:rgba(232,49,90,.05);animation:spin 55s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}

.hc{position:relative;z-index:2;text-align:center;padding:40px 24px;}
.h-eye{font-family:'Tenor Sans',sans-serif;font-size:.82em;letter-spacing:8px;text-transform:uppercase;color:var(--gold);margin-bottom:26px;animation:riseIn 1s .2s both;}
.h-heart{font-size:clamp(4.5em,11vw,8em);display:block;animation:throb 1.6s ease-in-out infinite,riseIn 1s .4s both;filter:drop-shadow(0 0 45px rgba(232,49,90,.85));margin-bottom:10px;}
.h-title{font-family:'Playfair Display',serif;font-size:clamp(3.8em,11vw,9.5em);font-weight:900;line-height:.87;letter-spacing:-3px;margin-bottom:18px;animation:riseIn 1s .6s both;}
.h-title em{display:block;font-style:italic;color:var(--rose);text-shadow:0 0 70px rgba(232,49,90,.6);}
.h-sub{font-family:'Dancing Script',cursive;font-size:clamp(1.5em,3.5vw,2.5em);color:var(--blush);margin-bottom:32px;animation:riseIn 1s .8s both;}
.h-pill{display:inline-flex;align-items:center;gap:14px;font-family:'Tenor Sans',sans-serif;font-size:.95em;color:var(--gold);letter-spacing:5px;text-transform:uppercase;border:1px solid rgba(201,150,46,.4);padding:13px 40px;border-radius:50px;background:rgba(201,150,46,.07);animation:riseIn 1s 1s both;}
.h-scroll{position:absolute;bottom:35px;left:50%;transform:translateX(-50%);font-size:.78em;letter-spacing:4px;color:rgba(255,255,255,.28);text-transform:uppercase;animation:bob 2.5s ease-in-out infinite;}
@keyframes bob{0%,100%{transform:translateX(-50%) translateY(0);}50%{transform:translateX(-50%) translateY(-9px);}}
@keyframes riseIn{from{opacity:0;transform:translateY(36px);}to{opacity:1;transform:translateY(0);}}

/* â•â•â•â• SECTIONS â•â•â•â• */
.sec{position:relative;z-index:1;padding:110px 6%;}
.sec-lbl{display:block;font-family:'Dancing Script',cursive;color:var(--gold);font-size:1.25em;letter-spacing:4px;text-align:center;margin-bottom:12px;}
.sec-ttl{font-family:'Playfair Display',serif;font-size:clamp(2.2em,5vw,3.8em);text-align:center;line-height:1.05;margin-bottom:65px;}
.sec-ttl em{color:var(--rose);font-style:italic;}

/* â•â•â•â• TIMELINE â•â•â•â• */
.story-sec{background:linear-gradient(180deg,#0e0205 0%,#140309 100%);}
.timeline{max-width:840px;margin:0 auto;position:relative;}
.timeline::before{content:'';position:absolute;left:50%;top:0;bottom:0;width:1px;background:linear-gradient(180deg,transparent,rgba(232,49,90,.45),transparent);transform:translateX(-50%);}
.tl-item{display:flex;gap:40px;margin-bottom:70px;position:relative;align-items:center;}
.tl-item:nth-child(even){flex-direction:row-reverse;}
.tl-dot{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:16px;height:16px;background:var(--rose);border-radius:50%;box-shadow:0 0 22px rgba(232,49,90,.8);z-index:2;animation:dpulse 2s ease-in-out infinite;}
@keyframes dpulse{0%,100%{box-shadow:0 0 10px rgba(232,49,90,.5);}50%{box-shadow:0 0 32px rgba(232,49,90,.95);}}
.tl-box{width:calc(50% - 40px);background:linear-gradient(135deg,rgba(255,255,255,.04),rgba(232,49,90,.07));border:1px solid rgba(232,49,90,.2);border-radius:18px;padding:30px 32px;transition:all .4s cubic-bezier(.23,1,.32,1);}
.tl-box:hover{transform:translateY(-7px);border-color:rgba(232,49,90,.45);box-shadow:0 22px 55px rgba(232,49,90,.18);}
.tl-date{font-family:'Tenor Sans',sans-serif;font-size:.76em;letter-spacing:4px;color:var(--gold);text-transform:uppercase;margin-bottom:8px;}
.tl-ttl{font-family:'Playfair Display',serif;font-size:1.3em;color:var(--blush);font-style:italic;margin-bottom:9px;}
.tl-txt{font-size:1em;line-height:1.82;color:rgba(255,255,255,.58);}

/* â•â•â•â• PHOTO GALLERY â•â•â•â• */
.gallery-sec{background:linear-gradient(180deg,#140309 0%,#080102 55%,#140309 100%);}
.gal-intro{text-align:center;max-width:580px;margin:0 auto 70px;font-size:1.2em;line-height:1.9;color:rgba(255,255,255,.55);font-style:italic;}
.photo-wall{max-width:1180px;margin:0 auto;display:grid;grid-template-columns:repeat(3,1fr);grid-auto-rows:260px;gap:22px;}
.p-big{grid-column:span 2;grid-row:span 2;}
.p-tall{grid-row:span 2;}
.polaroid{background:#1a0810;border-radius:16px;overflow:hidden;position:relative;cursor:pointer;border:1px solid rgba(255,255,255,.07);box-shadow:0 14px 45px rgba(0,0,0,.55);transition:all .5s cubic-bezier(.23,1,.32,1);transform:rotate(var(--rot,0deg));height:100%;}
.polaroid:hover{transform:rotate(0deg) scale(1.04) translateY(-10px);box-shadow:0 32px 85px rgba(232,49,90,.38);border-color:rgba(232,49,90,.55);z-index:10;}
.polaroid img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .6s cubic-bezier(.23,1,.32,1);filter:saturate(.82) contrast(1.06);}
.polaroid:hover img{transform:scale(1.09);filter:saturate(1.15) contrast(1.06);}
.p-ov{position:absolute;inset:0;background:linear-gradient(180deg,transparent 42%,rgba(14,2,7,.96) 100%);display:flex;flex-direction:column;justify-content:flex-end;padding:22px;opacity:0;transition:opacity .4s;border-radius:16px;}
.polaroid:hover .p-ov{opacity:1;}
.p-cap{font-family:'Dancing Script',cursive;font-size:1.3em;color:#fff;margin-bottom:4px;}
.p-dt{font-family:'Tenor Sans',sans-serif;font-size:.7em;letter-spacing:3px;color:var(--gold);text-transform:uppercase;}
.p-badge{position:absolute;top:14px;right:14px;width:36px;height:36px;background:rgba(232,49,90,.88);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1em;opacity:0;transform:scale(0);transition:all .3s .1s;}
.polaroid:hover .p-badge{opacity:1;transform:scale(1);}
.p-num-tag{position:absolute;top:12px;left:14px;font-family:'Tenor Sans',sans-serif;font-size:.68em;letter-spacing:2px;color:rgba(255,255,255,.5);background:rgba(0,0,0,.45);padding:4px 10px;border-radius:20px;text-transform:uppercase;}

/* â•â•â•â• SCROLLING STRIP â•â•â•â• */
.strip-wrap{overflow:hidden;padding:45px 0;position:relative;z-index:1;background:linear-gradient(180deg,#080102,#0e0205);}
.strip-track{display:flex;gap:18px;width:max-content;animation:sscroll 38s linear infinite;}
.strip-track:hover{animation-play-state:paused;}
@keyframes sscroll{from{transform:translateX(0);}to{transform:translateX(-50%);}}
.s-photo{width:210px;height:152px;flex-shrink:0;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.06);transition:all .4s;cursor:pointer;}
.s-photo:hover{transform:scale(1.07) translateY(-5px);border-color:rgba(232,49,90,.5);box-shadow:0 16px 42px rgba(232,49,90,.3);}
.s-photo img{width:100%;height:100%;object-fit:cover;filter:saturate(.78) contrast(1.06);}
.s-photo:hover img{filter:saturate(1.2) contrast(1.08);}

/* â•â•â•â• PROMISES â•â•â•â• */
.promise-sec{background:radial-gradient(ellipse at 0% 50%,rgba(107,15,46,.38) 0%,transparent 55%),radial-gradient(ellipse at 100% 50%,rgba(232,49,90,.14) 0%,transparent 55%),linear-gradient(180deg,#0e0205 0%,#140309 100%);}
.p-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(290px,1fr));gap:22px;max-width:1100px;margin:0 auto;}
.pc{background:linear-gradient(135deg,rgba(255,255,255,.03),rgba(232,49,90,.07));border:1px solid rgba(232,49,90,.18);border-radius:22px;padding:38px 32px;position:relative;overflow:hidden;transition:all .4s cubic-bezier(.23,1,.32,1);}
.pc::after{content:'';position:absolute;inset:0;border-radius:22px;background:linear-gradient(135deg,rgba(232,49,90,.12),transparent);opacity:0;transition:opacity .4s;}
.pc:hover{transform:translateY(-10px) scale(1.02);border-color:rgba(232,49,90,.48);box-shadow:0 26px 68px rgba(232,49,90,.22);}
.pc:hover::after{opacity:1;}
.pc-num{position:absolute;top:18px;right:24px;font-family:'Playfair Display',serif;font-size:4.5em;font-weight:900;color:rgba(232,49,90,.07);line-height:1;}
.pc-icon{font-size:2.6em;display:block;margin-bottom:18px;animation:flt 3s ease-in-out infinite;}
@keyframes flt{0%,100%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-9px) rotate(6deg);}}
.pc-title{font-family:'Playfair Display',serif;font-size:1.3em;color:var(--rose);font-style:italic;margin-bottom:12px;}
.pc-text{font-size:1.05em;line-height:1.85;color:rgba(255,255,255,.63);}

/* â•â•â•â• LOVE LETTER â•â•â•â• */
.letter-sec{background:radial-gradient(ellipse at 50% 0%,rgba(232,49,90,.2) 0%,transparent 55%),linear-gradient(180deg,#140309 0%,#0e0205 100%);}
.ltr-wrap{max-width:760px;margin:0 auto;}
.ltr-card{background:linear-gradient(155deg,rgba(255,255,255,.04),rgba(232,49,90,.06));border:1px solid rgba(232,49,90,.25);border-radius:28px;padding:65px 62px;position:relative;}
.ltr-card::before{content:'â';position:absolute;top:-14px;left:45px;font-size:5em;color:var(--rose);opacity:.24;font-family:'Playfair Display',serif;line-height:1;}
.l-sal{font-family:'Dancing Script',cursive;font-size:2em;color:var(--gold);margin-bottom:28px;}
.l-body{font-size:1.25em;line-height:2.05;color:rgba(255,255,255,.72);font-style:italic;}
.l-body p{margin-bottom:22px;}
.l-body p:last-child{margin-bottom:0;}
.l-sign{font-family:'Dancing Script',cursive;font-size:2.3em;color:var(--rose);text-align:right;margin-top:32px;}
.seal{width:88px;height:88px;margin:42px auto 0;background:radial-gradient(circle at 40% 40%,#e8315a,#6b0f2e);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2.5em;box-shadow:0 8px 32px rgba(232,49,90,.58);animation:spin 8s linear infinite;}

/* â•â•â•â• FOOTER â•â•â•â• */
footer{position:relative;z-index:1;text-align:center;padding:85px 20px 55px;background:linear-gradient(180deg,#0a0203 0%,var(--deep) 100%);border-top:1px solid rgba(232,49,90,.12);}
.ft-heart{font-size:3.8em;display:block;margin-bottom:22px;animation:throb 1.6s ease-in-out infinite;filter:drop-shadow(0 0 28px rgba(232,49,90,.75));}
.ft-title{font-family:'Playfair Display',serif;font-size:clamp(1.9em,4vw,3.2em);color:var(--rose);font-style:italic;margin-bottom:12px;}
.ft-quote{font-family:'Dancing Script',cursive;font-size:1.55em;color:var(--blush);margin-bottom:38px;opacity:.82;}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--rose),var(--velvet));color:#fff;border:none;padding:20px 60px;border-radius:50px;font-family:'Dancing Script',cursive;font-size:1.4em;cursor:pointer;box-shadow:0 10px 36px rgba(232,49,90,.48);transition:all .4s cubic-bezier(.23,1,.32,1);animation:gbtn 2.5s ease-in-out infinite;}
@keyframes gbtn{0%,100%{box-shadow:0 10px 36px rgba(232,49,90,.48);}50%{box-shadow:0 10px 58px rgba(232,49,90,.78),0 0 65px rgba(232,49,90,.25);}}
.cta-btn:hover{transform:translateY(-5px) scale(1.05);}
.ft-small{margin-top:52px;font-size:.78em;letter-spacing:4px;color:rgba(255,255,255,.18);text-transform:uppercase;}

/* â•â•â•â• LIGHTBOX â•â•â•â• */
#lb{position:fixed;inset:0;background:rgba(6,0,3,.97);z-index:60000;display:none;align-items:center;justify-content:center;flex-direction:column;}
#lb.open{display:flex;animation:fin .3s ease;}
@keyframes fin{from{opacity:0;}to{opacity:1;}}
#lb-img{max-width:88vw;max-height:78vh;border-radius:18px;border:1px solid rgba(232,49,90,.38);box-shadow:0 32px 110px rgba(232,49,90,.3);animation:pin .4s cubic-bezier(.23,1,.32,1);}
@keyframes pin{from{opacity:0;transform:scale(.8);}to{opacity:1;transform:scale(1);}}
#lb-x{position:absolute;top:26px;right:32px;font-size:2.5em;cursor:pointer;color:rgba(255,255,255,.38);border:none;background:none;transition:color .3s,transform .3s;}
#lb-x:hover{color:var(--rose);transform:rotate(90deg);}
.lbn{position:absolute;top:50%;transform:translateY(-50%);width:54px;height:54px;border-radius:50%;background:rgba(232,49,90,.2);border:1px solid rgba(232,49,90,.4);color:#fff;font-size:1.6em;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;}
.lbn:hover{background:rgba(232,49,90,.52);transform:translateY(-50%) scale(1.12);}
#lb-prv{left:22px;}#lb-nxt{right:22px;}
#lb-cap{margin-top:22px;font-family:'Dancing Script',cursive;font-size:1.75em;color:var(--blush);}
#lb-cnt{font-size:.8em;color:rgba(255,255,255,.3);letter-spacing:3px;margin-top:7px;}

/* â•â•â•â• POPUP â•â•â•â• */
#popup{position:fixed;inset:0;background:rgba(0,0,0,.72);z-index:50001;display:none;align-items:center;justify-content:center;}
#popup.open{display:flex;animation:fin .3s ease;}
.pop-box{background:linear-gradient(155deg,#200710,#120308);border:2px solid rgba(232,49,90,.52);border-radius:32px;padding:55px 48px;max-width:480px;width:92%;text-align:center;animation:pin .5s cubic-bezier(.23,1,.32,1);box-shadow:0 32px 95px rgba(232,49,90,.38);}
.pop-em{font-size:4.5em;display:block;margin-bottom:22px;animation:throb 1.5s ease-in-out infinite;}
.pop-txt{font-family:'Playfair Display',serif;font-size:1.5em;font-style:italic;line-height:1.65;color:var(--cream);margin-bottom:32px;}
.pop-btn{background:linear-gradient(135deg,var(--rose),var(--velvet));color:#fff;border:none;padding:15px 44px;border-radius:50px;font-family:'Dancing Script',cursive;font-size:1.25em;cursor:pointer;box-shadow:0 8px 28px rgba(232,49,90,.45);transition:all .3s;}
.pop-btn:hover{transform:translateY(-3px) scale(1.07);}

/* â•â•â•â• MUSIC BUTTON â•â•â•â• */
#mbn{position:fixed;bottom:32px;right:32px;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--rose),var(--velvet));border:none;font-size:26px;cursor:pointer;box-shadow:0 8px 28px rgba(232,49,90,.55);z-index:10000;display:flex;align-items:center;justify-content:center;transition:all .3s;}
#mbn:hover{transform:scale(1.15) rotate(15deg);}
#mbn.playing{animation:mbnPulse 1.5s ease-in-out infinite;}
@keyframes mbnPulse{0%,100%{box-shadow:0 8px 28px rgba(232,49,90,.55);}50%{box-shadow:0 8px 48px rgba(232,49,90,.9),0 0 60px rgba(232,49,90,.35);}}

/* â•â•â•â• LYRICS PANEL â•â•â•â• */
#lyrics-panel{
  position:fixed;
  left:0; top:0; bottom:0;
  width:360px;
  background:linear-gradient(180deg,rgba(10,1,5,.97) 0%,rgba(20,3,9,.98) 100%);
  border-right:1px solid rgba(232,49,90,.2);
  z-index:9998;
  display:flex;
  flex-direction:column;
  transform:translateX(-100%);
  transition:transform .6s cubic-bezier(.23,1,.32,1);
  box-shadow:8px 0 60px rgba(0,0,0,.6);
  backdrop-filter:blur(10px);
}
#lyrics-panel.open{transform:translateX(0);}

.lp-header{
  padding:28px 28px 20px;
  border-bottom:1px solid rgba(232,49,90,.15);
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-shrink:0;
}
.lp-song-info{flex:1;}
.lp-title{font-family:'Playfair Display',serif;font-size:1.25em;color:var(--cream);font-style:italic;margin-bottom:4px;}
.lp-artist{font-family:'Tenor Sans',sans-serif;font-size:.72em;letter-spacing:3px;text-transform:uppercase;color:var(--gold);}
.lp-close{background:none;border:none;font-size:1.5em;color:rgba(255,255,255,.3);cursor:pointer;transition:color .3s,transform .3s;padding:4px;}
.lp-close:hover{color:var(--rose);transform:rotate(90deg);}

/* Visualizer bars */
.lp-viz{
  display:flex;
  align-items:flex-end;
  justify-content:center;
  gap:4px;
  height:38px;
  padding:0 28px;
  margin:16px 0 8px;
  flex-shrink:0;
}
.viz-bar{
  width:4px;
  border-radius:2px;
  background:linear-gradient(180deg,var(--rose),var(--velvet));
  opacity:.7;
  transform-origin:bottom;
}
.playing-music .viz-bar{animation:vbar var(--dur,.6s) ease-in-out infinite alternate;}
@keyframes vbar{from{height:4px;opacity:.4;}to{height:var(--h,28px);opacity:1;}}

/* Progress bar inside panel */
.lp-progress-wrap{padding:0 28px;margin-bottom:10px;flex-shrink:0;}
.lp-prog-bar{height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden;cursor:pointer;}
.lp-prog-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--rose),var(--gold));border-radius:2px;transition:width .3s linear;}
.lp-time-row{display:flex;justify-content:space-between;margin-top:6px;font-family:'Tenor Sans',sans-serif;font-size:.65em;letter-spacing:2px;color:rgba(255,255,255,.3);}

/* Lyrics scroll container */
.lp-lyrics{
  flex:1;
  overflow-y:auto;
  padding:10px 0 30px;
  scroll-behavior:smooth;
}
.lp-lyrics::-webkit-scrollbar{width:3px;}
.lp-lyrics::-webkit-scrollbar-thumb{background:rgba(232,49,90,.3);border-radius:2px;}

.lyric-section{margin-bottom:6px;}
.lyric-section-label{
  font-family:'Tenor Sans',sans-serif;
  font-size:.6em;
  letter-spacing:4px;
  text-transform:uppercase;
  color:rgba(201,150,46,.5);
  text-align:center;
  padding:18px 28px 6px;
}
.lyric-line{
  display:block;
  padding:10px 28px;
  font-family:'Cormorant Garamond',serif;
  font-size:1.08em;
  line-height:1.65;
  color:rgba(255,255,255,.28);
  transition:all .5s cubic-bezier(.23,1,.32,1);
  border-left:3px solid transparent;
  cursor:default;
}
.lyric-line.active{
  color:#fff;
  font-size:1.2em;
  border-left-color:var(--rose);
  background:linear-gradient(90deg,rgba(232,49,90,.12),transparent);
  text-shadow:0 0 28px rgba(232,49,90,.45);
  padding-left:32px;
}
.lyric-line.past{color:rgba(255,255,255,.42);}
.lyric-line.hindi{font-style:italic;color:rgba(247,168,184,.28);}
.lyric-line.hindi.active{color:var(--blush);}
.lyric-line.hindi.past{color:rgba(247,168,184,.4);}

/* Open lyrics button â€” pulsing note icon beside music button */
#lyrics-btn{
  position:fixed;
  bottom:110px;
  right:32px;
  width:52px;height:52px;
  border-radius:50%;
  background:linear-gradient(135deg,rgba(232,49,90,.25),rgba(107,15,46,.6));
  border:1px solid rgba(232,49,90,.45);
  font-size:20px;
  cursor:pointer;
  z-index:10000;
  display:flex;align-items:center;justify-content:center;
  transition:all .4s cubic-bezier(.23,1,.32,1);
  box-shadow:0 6px 22px rgba(232,49,90,.3);
  opacity:0;
  transform:scale(0) translateY(10px);
}
#lyrics-btn.visible{opacity:1;transform:scale(1) translateY(0);}
#lyrics-btn:hover{transform:scale(1.15);box-shadow:0 8px 32px rgba(232,49,90,.55);}
#lyrics-btn.active-btn{background:linear-gradient(135deg,var(--rose),var(--velvet));border-color:transparent;}
.lyrics-btn-tooltip{
  position:absolute;
  right:62px;
  white-space:nowrap;
  font-family:'Tenor Sans',sans-serif;
  font-size:.7em;
  letter-spacing:2px;
  color:rgba(255,255,255,.6);
  background:rgba(10,1,5,.9);
  padding:5px 12px;
  border-radius:20px;
  border:1px solid rgba(232,49,90,.25);
  pointer-events:none;
  opacity:0;
  transition:opacity .3s;
}
#lyrics-btn:hover .lyrics-btn-tooltip{opacity:1;}

/* confetti */
.conf{position:fixed;pointer-events:none;z-index:200;animation:cfall 3.5s ease-out forwards;}
@keyframes cfall{0%{opacity:1;transform:translateY(0) rotate(0) scale(1);}100%{opacity:0;transform:translateY(90vh) rotate(720deg) scale(.15);}}

/* â•â•â•â• RESPONSIVE â•â•â•â• */
@media(max-width:900px){
  .photo-wall{grid-template-columns:repeat(2,1fr);grid-auto-rows:220px;}
  .p-big{grid-column:span 2;}
  .timeline::before{left:14px;}
  .tl-item,.tl-item:nth-child(even){flex-direction:column;padding-left:46px;}
  .tl-dot{left:14px;top:22px;}
  .tl-box{width:100%;}
  .ltr-card{padding:45px 30px;}
  #lyrics-panel{width:300px;}
}
@media(max-width:580px){
  .photo-wall{grid-template-columns:1fr;grid-auto-rows:250px;}
  .p-big,.p-tall{grid-column:span 1;grid-row:span 1;}
  .p-grid{grid-template-columns:1fr;}
  #lyrics-panel{width:100%;border-right:none;}
}
</style>
</head>
<body>

<!-- PRELOADER -->
<div id="intro">
  <div class="il-heart">ğŸ’–</div>
  <div class="il-text">Loading Our Love Storyâ€¦</div>
  <div class="il-bar"><div class="il-fill"></div></div>
</div>

<!-- CURSOR -->
<div id="cur">ğŸ’•</div>
<div id="prog"></div>
<canvas id="cvs"></canvas>
<audio id="bgm" loop preload="auto"></audio>
<button id="mbn" onclick="toggleMusic()">ğŸµ</button>

<!-- LYRICS BUTTON -->
<button id="lyrics-btn" onclick="toggleLyrics()" title="Show Lyrics">
  ğŸ¶
  <span class="lyrics-btn-tooltip">Our Song Lyrics</span>
</button>

<!-- â•â•â•â• LYRICS PANEL â•â•â•â• -->
<div id="lyrics-panel">
  <div class="lp-header">
    <div class="lp-song-info">
      <div class="lp-title">My Valentine Song ğŸ’•</div>
      <div class="lp-artist">Written with love Â· Soma for Rohit</div>
    </div>
    <button class="lp-close" onclick="toggleLyrics()">âœ•</button>
  </div>

  <!-- Visualizer -->
  <div class="lp-viz" id="lp-viz"></div>

  <!-- Progress -->
  <div class="lp-progress-wrap">
    <div class="lp-prog-bar" id="lp-prog-bar" onclick="seekFromBar(event)">
      <div class="lp-prog-fill" id="lp-prog-fill"></div>
    </div>
    <div class="lp-time-row">
      <span id="lp-cur-time">0:00</span>
      <span id="lp-dur-time">0:00</span>
    </div>
  </div>

  <!-- Calibration toolbar -->
  <div id="calib-bar" style="display:none;flex-shrink:0;padding:10px 16px;background:rgba(201,150,46,.1);border-top:1px solid rgba(201,150,46,.25);border-bottom:1px solid rgba(201,150,46,.25);">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
      <div style="font-family:'Tenor Sans',sans-serif;font-size:.65em;letter-spacing:2px;color:var(--gold);text-transform:uppercase;line-height:1.4;">
        ğŸ¯ Calibrate Mode<br>
        <span style="color:rgba(255,255,255,.4);letter-spacing:1px;">Tap each line when it starts singing</span>
      </div>
      <div style="display:flex;gap:6px;">
        <button onclick="calibSave()" style="background:linear-gradient(135deg,var(--rose),var(--velvet));color:#fff;border:none;padding:7px 14px;border-radius:20px;font-family:'Tenor Sans',sans-serif;font-size:.65em;letter-spacing:1px;cursor:pointer;">SAVE âœ“</button>
        <button onclick="calibCancel()" style="background:rgba(255,255,255,.07);color:rgba(255,255,255,.5);border:1px solid rgba(255,255,255,.15);padding:7px 12px;border-radius:20px;font-family:'Tenor Sans',sans-serif;font-size:.65em;cursor:pointer;">Cancel</button>
      </div>
    </div>
    <div id="calib-next" style="margin-top:8px;font-family:'Cormorant Garamond',serif;font-size:.95em;color:var(--blush);font-style:italic;min-height:1.2em;text-align:center;"></div>
    <div id="calib-progress-wrap" style="margin-top:8px;">
      <div style="height:2px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden;">
        <div id="calib-prog" style="height:100%;background:var(--gold);width:0%;transition:width .2s;"></div>
      </div>
      <div style="font-family:'Tenor Sans',sans-serif;font-size:.6em;color:rgba(255,255,255,.3);text-align:center;margin-top:4px;" id="calib-count">0 / 0 lines tagged</div>
    </div>
  </div>

  <!-- Calibrate button (hidden in panel header area) -->
  <div id="calib-toggle-wrap" style="padding:8px 28px;flex-shrink:0;text-align:right;">
    <button onclick="startCalib()" id="calib-toggle-btn" style="background:none;border:1px solid rgba(201,150,46,.3);color:rgba(201,150,46,.6);padding:5px 14px;border-radius:20px;font-family:'Tenor Sans',sans-serif;font-size:.62em;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .3s;">
      â± Fix Timing
    </button>
  </div>

  <!-- Lyrics scroll -->
  <div class="lp-lyrics" id="lp-lyrics-scroll">

    <div class="lyric-section">
      <div class="lyric-section-label">âœ¦ Verse 1 âœ¦</div>
      <span class="lyric-line" data-t="0" data-idx="0">I used to wonder where my story would go</span>
      <span class="lyric-line" data-t="5" data-idx="1">Searching for a feeling I didn't quite know</span>
      <span class="lyric-line" data-t="10" data-idx="2">But then I saw your face, and the world went still</span>
      <span class="lyric-line hindi" data-t="15" data-idx="3">Ab har raasta tere naam, by my own will</span>
      <span class="lyric-line" data-t="20" data-idx="4">You're the heartbeat in my silence, the sun in my grey</span>
      <span class="lyric-line" data-t="26" data-idx="5">I'm seeing my whole future just a heartbeat away</span>
    </div>

    <div class="lyric-section">
      <div class="lyric-section-label">âœ¦ Chorus âœ¦</div>
      <span class="lyric-line" data-t="33" data-idx="6">Because I've found my love, my life, my soul</span>
      <span class="lyric-line hindi" data-t="38" data-idx="7">Tere bina main adhoora, you make me whole</span>
      <span class="lyric-line" data-t="43" data-idx="8">In every situation, through the thick and the thin</span>
      <span class="lyric-line hindi" data-t="48" data-idx="9">Main tera rahoongi, let the forever begin</span>
      <span class="lyric-line" data-t="53" data-idx="10">Be it the highs or the lows, let the seasons change</span>
      <span class="lyric-line hindi" data-t="58" data-idx="11">Mera pyaar wahi rahega, it will never rearrange</span>
    </div>

    <div class="lyric-section">
      <div class="lyric-section-label">âœ¦ Verse 2 âœ¦</div>
      <span class="lyric-line" data-t="66" data-idx="12">They say love is a journey, but you are my home</span>
      <span class="lyric-line hindi" data-t="71" data-idx="13">Ab kahin bhi jaaun, I'm never alone</span>
      <span class="lyric-line hindi" data-t="76" data-idx="14">Tera saath ho toh dhoop bhi suhaani lage</span>
      <span class="lyric-line hindi" data-t="81" data-idx="15">Every moment with you ek kahaani lage</span>
      <span class="lyric-line" data-t="86" data-idx="16">I promise to hold you when the world gets loud</span>
      <span class="lyric-line hindi" data-t="91" data-idx="17">Tu hi meri manzil, you're my only crowd</span>
    </div>

    <div class="lyric-section">
      <div class="lyric-section-label">âœ¦ Bridge âœ¦</div>
      <span class="lyric-line" data-t="99" data-idx="18">No "ifs" or "buts," no turning back now</span>
      <span class="lyric-line hindi" data-t="104" data-idx="19">Main nibhaaoongi har ek vaada and vow</span>
      <span class="lyric-line" data-t="109" data-idx="20">It's a permanent bond, it's a soul-to-soul tie</span>
      <span class="lyric-line" data-t="114" data-idx="21">Underneath the stars and this infinite sky</span>
      <span class="lyric-line hindi" data-t="119" data-idx="22">Ek chhoti si baat, will you stay by my side?</span>
      <span class="lyric-line hindi" data-t="124" data-idx="23">Is lambe safar mein, be my light and my guide</span>
    </div>

    <div class="lyric-section">
      <div class="lyric-section-label">âœ¦ Outro âœ¦</div>
      <span class="lyric-line" data-t="133" data-idx="24">So baby, tell me, is your heart mine to stay?</span>
      <span class="lyric-line hindi" data-t="139" data-idx="25">Kya tum rahoge mere Valentine... hamesha ke liye?</span>
      <span class="lyric-line" data-t="147" data-idx="26">Every single day?</span>
      <span class="lyric-line" data-t="152" data-idx="27">Will you be my Valentine forever?</span>
    </div>

    <div style="height:60px;"></div>
  </div>
</div>

<!-- â•â•â•â•â•â• HERO â•â•â•â•â•â• -->
<section class="hero">
  <div class="hbg">
    <div class="rings">
      <div class="ring"></div><div class="ring"></div><div class="ring"></div>
    </div>
  </div>
  <div class="hc">
    <div class="h-eye">14 Â· February Â· 2026 &nbsp;âœ¦&nbsp; Valentine's Day</div>
    <span class="h-heart">ğŸ’–</span>
    <h1 class="h-title">Happy<br><em>Valentine's</em></h1>
    <p class="h-sub">To the one who owns every piece of my heart</p>
    <div class="h-pill">
      <span>ğŸŒ¹</span>
      <span>Soma &amp; Rohit</span>
      <span>ğŸŒ¹</span>
    </div>
  </div>
  <div class="h-scroll">â†“ scroll for our story â†“</div>
</section>

<!-- â•â•â•â•â•â• TIMELINE â•â•â•â•â•â• -->
<section class="sec story-sec">
  <span class="sec-lbl">How it all began</span>
  <h2 class="sec-ttl">Our <em>Love Story</em></h2>
  <div class="timeline">
    <div class="tl-item">
      <div class="tl-dot"></div>
      <div class="tl-box">
        <div class="tl-date">Day One âœ¦</div>
        <div class="tl-ttl">The Day We Met âœ¨</div>
        <p class="tl-txt">The universe conspired to bring two souls together. The moment I saw you, something inside me shifted â€” like the world had quietly rearranged itself just for us.</p>
      </div>
    </div>
    <div class="tl-item">
      <div class="tl-dot"></div>
      <div class="tl-box">
        <div class="tl-date">First Date âœ¦</div>
        <div class="tl-ttl">Our First Date ğŸŒ¹</div>
        <p class="tl-txt">Nervous smiles and stolen glances â€” a thousand butterflies. That evening felt like the beginning of forever. Because it was.</p>
      </div>
    </div>
    <div class="tl-item">
      <div class="tl-dot"></div>
      <div class="tl-box">
        <div class="tl-date">The Moment âœ¦</div>
        <div class="tl-ttl">When I Fell For You ğŸ’</div>
        <p class="tl-txt">One ordinary afternoon, I looked at you laughing and realized â€” this is the person I want beside me every single day of my life.</p>
      </div>
    </div>
    <div class="tl-item">
      <div class="tl-dot"></div>
      <div class="tl-box">
        <div class="tl-date">Feb 14, 2026 âœ¦</div>
        <div class="tl-ttl">Forever &amp; Always ğŸ’</div>
        <p class="tl-txt">Every chapter has led us here. And every chapter that follows, I want to write only with you â€” my love, my home, my everything.</p>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â• PHOTO GALLERY â•â•â•â•â•â• -->
<section class="sec gallery-sec">
  <span class="sec-lbl">Frozen moments of us</span>
  <h2 class="sec-ttl">Our <em>Memories</em> Together</h2>
  <p class="gal-intro">Every picture holds a heartbeat, a laugh, a glance that says everything words cannot. These are the moments I treasure most in this world.</p>
  <div class="photo-wall">
    <div class="polaroid p-big" style="--rot:-1.2deg" onclick="openLB(0)">
      <img src="1.jpeg" alt="Us"/>
      <div class="p-ov"><div class="p-cap">My favorite person in the world ğŸ’•</div><div class="p-dt">Our special day</div></div>
      <div class="p-badge">ğŸ’–</div><div class="p-num-tag">01</div>
    </div>
    <div class="polaroid" style="--rot:1.8deg" onclick="openLB(1)">
      <img src="2.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">Pure happiness ğŸ˜Š</div><div class="p-dt">A beautiful day</div></div>
      <div class="p-badge">ğŸ’—</div><div class="p-num-tag">02</div>
    </div>
    <div class="polaroid p-tall" style="--rot:-2.2deg" onclick="openLB(2)">
      <img src="IMG_1166.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">Just the two of us ğŸŒŸ</div><div class="p-dt">Our adventure</div></div>
      <div class="p-badge">âœ¨</div><div class="p-num-tag">03</div>
    </div>
    <div class="polaroid" style="--rot:1.2deg" onclick="openLB(3)">
      <img src="3.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">You make me smile always ğŸ’‹</div><div class="p-dt">Sweet memory</div></div>
      <div class="p-badge">ğŸ’</div><div class="p-num-tag">04</div>
    </div>
    <div class="polaroid" style="--rot:-1.8deg" onclick="openLB(4)">
      <img src="IMG_0367.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">Laughing with you ğŸ¤—</div><div class="p-dt">A perfect evening</div></div>
      <div class="p-badge">ğŸŒ¹</div><div class="p-num-tag">05</div>
    </div>
    <div class="polaroid" style="--rot:2.1deg" onclick="openLB(5)">
      <img src="IMG_2077.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">Home is with you ğŸ¡</div><div class="p-dt">Unforgettable</div></div>
      <div class="p-badge">ğŸ’</div><div class="p-num-tag">06</div>
    </div>
    <div class="polaroid" style="--rot:-1deg" onclick="openLB(6)">
      <img src="IMG_1400.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">My whole world ğŸŒ</div><div class="p-dt">Forever</div></div>
      <div class="p-badge">ğŸ’–</div><div class="p-num-tag">07</div>
    </div>
    <div class="polaroid p-tall" style="--rot:1.5deg" onclick="openLB(7)">
      <img src="IMG_5133.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">Every moment counts ğŸ’«</div><div class="p-dt">Always & forever</div></div>
      <div class="p-badge">ğŸ’•</div><div class="p-num-tag">08</div>
    </div>
    <div class="polaroid" style="--rot:-2deg" onclick="openLB(8)">
      <img src="IMG_0932.jpeg" alt="Together"/>
      <div class="p-ov"><div class="p-cap">You're my sunshine â˜€ï¸</div><div class="p-dt">Best day ever</div></div>
      <div class="p-badge">âœ¨</div><div class="p-num-tag">09</div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â• SCROLLING STRIP â•â•â•â•â•â• -->
<div class="strip-wrap">
  <div class="strip-track" id="strip"></div>
</div>

<!-- â•â•â•â•â•â• PROMISES â•â•â•â•â•â• -->
<section class="sec promise-sec">
  <span class="sec-lbl">From my heart to yours</span>
  <h2 class="sec-ttl">My <em>Promises</em> to You</h2>
  <div class="p-grid">
    <div class="pc"><span class="pc-num">01</span><span class="pc-icon">ğŸ¤</span><div class="pc-title">Always Beside You</div><p class="pc-text">In every storm, every sunrise, every ordinary day â€” I promise to be there for you, unwavering, in each and every situation life brings our way.</p></div>
    <div class="pc"><span class="pc-num">02</span><span class="pc-icon">â¤ï¸</span><div class="pc-title">Love You Always</div><p class="pc-text">Not just today, not just when it's easy â€” but always, forever, with every heartbeat and every single breath for the rest of my life.</p></div>
    <div class="pc"><span class="pc-num">03</span><span class="pc-icon">ğŸ›¡ï¸</span><div class="pc-title">Your Safe Haven</div><p class="pc-text">Your heart is the safest place it could ever be. I will guard your feelings, your trust, and your peace â€” always and completely.</p></div>
    <div class="pc"><span class="pc-num">04</span><span class="pc-icon">ğŸŒŸ</span><div class="pc-title">Your Biggest Believer</div><p class="pc-text">Every dream you dare to dream, every goal you set â€” I will believe in you louder and longer than anyone else ever could.</p></div>
    <div class="pc"><span class="pc-num">05</span><span class="pc-icon">ğŸ˜Š</span><div class="pc-title">Fill You With Joy</div><p class="pc-text">I promise to make you smile every single day, to turn tears into laughter and your heaviest moments into memories we'll treasure forever.</p></div>
    <div class="pc"><span class="pc-num">06</span><span class="pc-icon">ğŸ’</span><div class="pc-title">Choose You Every Day</div><p class="pc-text">Not once, but every morning I wake â€” I choose you. Over and over. You are my forever decision, my favorite chapter, my greatest love.</p></div>
  </div>
</section>

<!-- â•â•â•â•â•â• LOVE LETTER â•â•â•â•â•â• -->
<section class="sec letter-sec">
  <span class="sec-lbl">Written from the soul</span>
  <h2 class="sec-ttl">A <em>Love Letter</em> For You</h2>
  <div class="ltr-wrap">
    <div class="ltr-card">
      <div class="l-sal">My Cutie pie,</div>
      <div class="l-body">
        <p>On this Valentine's Day, I want you to know that loving you is the most beautiful adventure of my entire life. You walked in and rearranged everything â€” in the most extraordinary, wonderful way.</p>
        <p>Every moment with you is a gift I never knew to ask for. Your laugh is my favorite sound. Your smile, my favorite sight. Your heart â€” my favorite place to call home.</p>
        <p>I promise to be there for you through every chapter â€” the ones full of joy that make us leap, and the difficult pages that make us grow together. Through it all, I will love you always. Not just when it's easy, but especially when it is hard.</p>
        <p>You are my first thought every morning, my last thought every night, and every beautiful thought in between. Happy Valentine's Day, my love. Today, tomorrow, and every day after â€” I choose you, always. ğŸ’•</p>
      </div>
      <div class="l-sign">Forever yours, Soma ğŸ’‹</div>
      <div class="seal">ğŸ’–</div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â• FOOTER â•â•â•â•â•â• -->
<footer>
  <span class="ft-heart">ğŸ’–</span>
  <div class="ft-title">Happy Valentine's Day, My Love!</div>
  <div class="ft-quote">"You are my today and all of my tomorrows, Cutie Pie ğŸ’•"</div>
  <button class="cta-btn" onclick="showMsg()">Send My Heart to You ğŸ’Œ</button>
  <div class="ft-small" style="margin-top:52px;">Made with ğŸ’– just for you Â· 14 February 2026</div>
</footer>

<!-- â•â•â•â•â•â• LIGHTBOX â•â•â•â•â•â• -->
<div id="lb">
  <button id="lb-x" onclick="closeLB()">âœ•</button>
  <button class="lbn" id="lb-prv" onclick="navLB(-1)">â€¹</button>
  <img id="lb-img" src="" alt="Memory"/>
  <button class="lbn" id="lb-nxt" onclick="navLB(1)">â€º</button>
  <div id="lb-cap"></div>
  <div id="lb-cnt"></div>
</div>

<!-- â•â•â•â•â•â• POPUP â•â•â•â•â•â• -->
<div id="popup">
  <div class="pop-box">
    <span class="pop-em" id="pop-em">ğŸ’–</span>
    <p class="pop-txt" id="pop-txt"></p>
    <button class="pop-btn" onclick="closeMsg()">I Love You Too! ğŸ’•</button>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRELOADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
setTimeout(()=>{
  const el=document.getElementById('intro');
  el.classList.add('gone');
  setTimeout(()=>el.remove(),1500);
  burst(window.innerWidth/2,100,32);
},2600);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MUSIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const bgm=document.getElementById('bgm');
bgm.src='valentine.mp3';
bgm.volume=0.22;
const mbn=document.getElementById('mbn');

window.addEventListener('load',()=>setTimeout(()=>{
  bgm.play().catch(()=>{});
},700));

['click','touchstart','keydown','mousemove'].forEach(ev=>
  document.addEventListener(ev,()=>{
    if(bgm.paused)bgm.play().catch(()=>{});
  },{once:true})
);

document.addEventListener('visibilitychange',()=>
  document.hidden?bgm.pause():bgm.play().catch(()=>{})
);

bgm.addEventListener('play',()=>{
  mbn.textContent='ğŸµ';
  mbn.classList.add('playing');
  document.body.classList.add('playing-music');
  document.getElementById('lyrics-btn').classList.add('visible');
});
bgm.addEventListener('pause',()=>{
  mbn.textContent='ğŸ”‡';
  mbn.classList.remove('playing');
  document.body.classList.remove('playing-music');
});

function toggleMusic(){
  bgm.paused?bgm.play():bgm.pause();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LYRICS ENGINE â€” FIXED SYNC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const lyricLines = Array.from(document.querySelectorAll('.lyric-line'));
let lyricsOpen = false;
let lastActiveIdx = -1;

// Load saved timestamps from localStorage if available
(function loadSavedTimestamps(){
  try {
    const saved = localStorage.getItem('vday_lyrics_timestamps');
    if(saved){
      const ts = JSON.parse(saved);
      lyricLines.forEach((line, i) => {
        if(ts[i] !== undefined) line.dataset.t = ts[i];
      });
    }
  } catch(e){}
})();

function toggleLyrics(){
  const panel = document.getElementById('lyrics-panel');
  const btn = document.getElementById('lyrics-btn');
  lyricsOpen = !lyricsOpen;
  panel.classList.toggle('open', lyricsOpen);
  btn.classList.toggle('active-btn', lyricsOpen);
  btn.textContent = lyricsOpen ? 'âœ•' : 'ğŸ¶';
  if(lyricsOpen && !bgm.paused) syncLyricsNow();
}

function syncLyricsNow(){
  const t = bgm.currentTime;
  let activeIdx = -1;

  // Walk backwards from end â€” find the LAST line whose timestamp <= currentTime
  // This ensures we never highlight a line before its time
  for(let i = lyricLines.length - 1; i >= 0; i--){
    const lt = parseFloat(lyricLines[i].dataset.t);
    if(t >= lt){
      activeIdx = i;
      break;
    }
  }

  if(activeIdx === lastActiveIdx) return;
  lastActiveIdx = activeIdx;

  lyricLines.forEach((line, i) => {
    line.classList.remove('active','past');
    if(i === activeIdx) line.classList.add('active');
    else if(i < activeIdx) line.classList.add('past');
  });

  // Auto-scroll active line to center of panel
  if(activeIdx >= 0){
    const activeLine = lyricLines[activeIdx];
    const scroll = document.getElementById('lp-lyrics-scroll');
    const lineTop = activeLine.offsetTop;
    const scrollCenter = lineTop - scroll.clientHeight / 2 + activeLine.clientHeight / 2;
    scroll.scrollTo({ top: scrollCenter, behavior: 'smooth' });
  }
}

// Update lyrics + progress bar on timeupdate
bgm.addEventListener('timeupdate', () => {
  syncLyricsNow();
  if(bgm.duration){
    const pct = (bgm.currentTime / bgm.duration) * 100;
    document.getElementById('lp-prog-fill').style.width = pct + '%';
  }
  document.getElementById('lp-cur-time').textContent = fmtTime(bgm.currentTime);
});

bgm.addEventListener('loadedmetadata', () => {
  document.getElementById('lp-dur-time').textContent = fmtTime(bgm.duration);
});

function fmtTime(s){
  if(!s || isNaN(s)) return '0:00';
  const m = Math.floor(s / 60);
  const sec = Math.floor(s % 60);
  return m + ':' + (sec < 10 ? '0' : '') + sec;
}

function seekFromBar(e){
  if(!bgm.duration) return;
  const bar = document.getElementById('lp-prog-bar');
  const rect = bar.getBoundingClientRect();
  const pct = (e.clientX - rect.left) / rect.width;
  bgm.currentTime = pct * bgm.duration;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAP-TO-CALIBRATE SYSTEM
   Play the song, tap each line exactly when
   that line starts singing â€” saves automatically
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let calibMode = false;
let calibIdx = 0;
let calibTimestamps = [];

function startCalib(){
  if(bgm.paused){
    alert('â–¶ Please start the song first, then tap "Fix Timing"!');
    return;
  }
  calibMode = true;
  calibIdx = 0;
  calibTimestamps = new Array(lyricLines.length).fill(null);

  document.getElementById('calib-bar').style.display = 'block';
  document.getElementById('calib-toggle-wrap').style.display = 'none';

  // Make all lines tappable
  lyricLines.forEach((line, i) => {
    line.style.cursor = 'pointer';
    line.style.transition = 'all .2s';
    line.addEventListener('click', calibTap);
    line.style.opacity = i === 0 ? '1' : '0.35';
    line.style.borderLeft = '3px solid transparent';
  });

  updateCalibUI();
}

function calibTap(e){
  if(!calibMode) return;
  const line = e.currentTarget;
  const idx = parseInt(line.dataset.idx);

  // Only allow tapping the next expected line (or any line for flexibility)
  const t = bgm.currentTime;
  calibTimestamps[idx] = parseFloat(t.toFixed(2));

  // Visual feedback â€” flash gold
  line.style.borderLeft = '3px solid var(--gold)';
  line.style.color = 'var(--gold)';
  line.style.opacity = '0.7';

  setTimeout(() => {
    line.style.borderLeft = '3px solid var(--rose)';
    line.style.color = 'rgba(255,255,255,0.5)';
  }, 300);

  // Advance calibIdx to next untagged
  calibIdx = idx + 1;
  updateCalibUI();

  // If all done, auto-save
  const tagged = calibTimestamps.filter(x => x !== null).length;
  if(tagged === lyricLines.length) setTimeout(calibSave, 400);
}

function updateCalibUI(){
  const total = lyricLines.length;
  const tagged = calibTimestamps.filter(x => x !== null).length;

  document.getElementById('calib-count').textContent = tagged + ' / ' + total + ' lines tagged';
  document.getElementById('calib-prog').style.width = (tagged / total * 100) + '%';

  // Highlight next line to tap
  lyricLines.forEach((line, i) => {
    if(i === calibIdx){
      line.style.opacity = '1';
      line.style.color = '#fff';
      line.style.borderLeft = '3px solid var(--gold)';
      // Scroll into view
      const scroll = document.getElementById('lp-lyrics-scroll');
      const center = line.offsetTop - scroll.clientHeight/2 + line.clientHeight/2;
      scroll.scrollTo({ top: center, behavior: 'smooth' });
      document.getElementById('calib-next').textContent =
        'ğŸ‘† Tap when: "' + line.textContent.trim().slice(0,38) + (line.textContent.length > 38 ? 'â€¦' : '') + '"';
    }
  });

  if(calibIdx >= total){
    document.getElementById('calib-next').textContent = 'âœ… All lines tagged! Hit SAVE';
  }
}

function calibSave(){
  // Apply new timestamps to lines
  lyricLines.forEach((line, i) => {
    if(calibTimestamps[i] !== null){
      line.dataset.t = calibTimestamps[i];
    }
  });

  // Persist to localStorage
  try {
    const ts = lyricLines.map(l => parseFloat(l.dataset.t));
    localStorage.setItem('vday_lyrics_timestamps', JSON.stringify(ts));
  } catch(e){}

  calibCleanup();
  lastActiveIdx = -1; // Force re-sync
  syncLyricsNow();

  // Brief success flash
  const bar = document.getElementById('calib-bar');
  bar.innerHTML = '<div style="text-align:center;padding:10px;font-family:\'Dancing Script\',cursive;font-size:1.1em;color:var(--gold);">ğŸ’– Timing saved perfectly!</div>';
  setTimeout(() => {
    bar.style.display = 'none';
    bar.innerHTML = ''; // Reset for next use â€” re-inject original HTML
    document.getElementById('calib-toggle-wrap').style.display = '';
  }, 1800);
}

function calibCancel(){
  calibCleanup();
  document.getElementById('calib-bar').style.display = 'none';
  document.getElementById('calib-toggle-wrap').style.display = '';
}

function calibCleanup(){
  calibMode = false;
  lyricLines.forEach(line => {
    line.style.cursor = '';
    line.style.opacity = '';
    line.style.color = '';
    line.style.borderLeft = '';
    line.removeEventListener('click', calibTap);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VISUALIZER BARS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function buildViz(){
  const viz = document.getElementById('lp-viz');
  const heights=[8,14,22,30,36,28,38,26,18,32,38,24,16,34,22,12,36,28,20,30,16,38,24,14];
  const durs=['.5s','.7s','.4s','.9s','.6s','.8s','.5s','.7s','.6s','.4s','.8s','.5s','.9s','.6s','.7s','.4s','.5s','.8s','.6s','.7s','.4s','.5s','.9s','.6s'];
  heights.forEach((h,i)=>{
    const b=document.createElement('div');
    b.className='viz-bar';
    b.style.setProperty('--h',h+'px');
    b.style.setProperty('--dur',durs[i%durs.length]);
    b.style.animationDelay=(i*.04)+'s';
    b.style.height='4px';
    viz.appendChild(b);
  });
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CURSOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const curTx=['ğŸ’•','ğŸ’–','ğŸ’—','ğŸ’','âœ¨','ğŸŒ¹','ğŸ’‹','ğŸŒ¸'];
let ci=0;
const curEl=document.getElementById('cur');
document.addEventListener('mousemove',e=>{curEl.style.left=e.clientX+'px';curEl.style.top=e.clientY+'px';});
setInterval(()=>{curEl.textContent=curTx[ci++%curTx.length];},900);

/* SCROLL PROGRESS */
window.addEventListener('scroll',()=>{
  document.getElementById('prog').style.width=(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100)+'%';
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEART CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const canvas=document.getElementById('cvs'),ctx=canvas.getContext('2d');
let W,H;
const rsz=()=>{W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;};
rsz(); window.addEventListener('resize',rsz);
const COLS=['#e8315a','#f7a8b8','#c9962e','#fff6f0','#6b0f2e'];
const pts=Array.from({length:42},()=>mkPt());
function mkPt(){return{x:Math.random()*(W||1200),y:Math.random()*(H||800),s:Math.random()*13+5,vx:(Math.random()-.5)*.42,vy:-(Math.random()*.75+.28),a:Math.random()*.32+.08,r:Math.random()*Math.PI*2,dr:(Math.random()-.5)*.024,c:COLS[Math.floor(Math.random()*COLS.length)]};}
function dH(x,y,s,c,a){
  ctx.save();ctx.globalAlpha=a;ctx.fillStyle=c;
  ctx.beginPath();ctx.moveTo(x,y);
  ctx.bezierCurveTo(x,y-s*.3,x-s*.6,y-s*.9,x-s*.7,y-s*.5);
  ctx.bezierCurveTo(x-s*.9,y-s*.1,x-s*.5,y+s*.3,x,y+s*.6);
  ctx.bezierCurveTo(x+s*.5,y+s*.3,x+s*.9,y-s*.1,x+s*.7,y-s*.5);
  ctx.bezierCurveTo(x+s*.6,y-s*.9,x,y-s*.3,x,y);
  ctx.fill();ctx.restore();
}
(function anim(){
  ctx.clearRect(0,0,W,H);
  const t=Date.now()*.001;
  pts.forEach(p=>{
    ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);
    dH(0,0,p.s,p.c,p.a*(0.5+0.5*Math.sin(t+p.x*.01)));
    ctx.restore();
    p.x+=p.vx;p.y+=p.vy;p.r+=p.dr;
    if(p.y<-20){p.y=H+20;p.x=Math.random()*W;}
  });
  requestAnimationFrame(anim);
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI BURST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CONF=['ğŸ’–','ğŸ’•','ğŸ’—','ğŸ’','âœ¨','ğŸŒ¹','ğŸ’‹','ğŸŒ¸','ğŸ€','ğŸ’«'];
function burst(x,y,n=18){
  for(let i=0;i<n;i++){
    setTimeout(()=>{
      const el=document.createElement('div');
      el.className='conf';
      el.textContent=CONF[Math.floor(Math.random()*CONF.length)];
      el.style.cssText=`left:${x+(Math.random()-.5)*280}px;top:${y-(Math.random()*60)}px;font-size:${Math.random()*14+13}px;animation-duration:${Math.random()*2+2.5}s;`;
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),5500);
    },i*65);
  }
}
document.addEventListener('click',e=>{
  if(!e.target.closest('button,input,.polaroid,.s-photo,#lyrics-panel'))burst(e.clientX,e.clientY,12);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLING STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const stripData=[
  {src:'1.jpeg',cap:'Us ğŸ’•'},{src:'2.jpeg',cap:'Always ğŸ’–'},{src:'3.jpeg',cap:'Forever ğŸŒ¹'},
  {src:'IMG_0834.jpeg',cap:'My love ğŸ’'},{src:'IMG_0995.jpeg',cap:'Together âœ¨'},
  {src:'IMG_1113.jpeg',cap:'My heart ğŸ’—'},{src:'43016b01-1edc-45b0-b9ff-bc85319bd132.jpeg',cap:'Memories ğŸ’‹'},
  {src:'IMG_1905_Original.jpeg',cap:'Our story ğŸŒ¸'},{src:'IMG_6961.jpeg',cap:'You & me ğŸ’'},
  {src:'IMG_1063.jpeg',cap:'Adore you ğŸ’–'},
];
(function buildStrip(){
  const t=document.getElementById('strip');
  [...stripData,...stripData].forEach(p=>{
    const d=document.createElement('div');
    d.className='s-photo';
    d.innerHTML=`<img src="${p.src}" alt="${p.cap}" loading="lazy"/>`;
    d.onclick=()=>burst(window.innerWidth/2,window.innerHeight/2,14);
    t.appendChild(d);
  });
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIGHTBOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const photos=[
  {src:'1.jpeg',cap:'My favorite person ğŸ’•'},{src:'2.jpeg',cap:'Pure happiness ğŸ˜Š'},
  {src:'IMG_1166.jpeg',cap:'Just the two of us ğŸŒŸ'},{src:'3.jpeg',cap:'You make me smile ğŸ’‹'},
  {src:'IMG_0367.jpeg',cap:'Laughing with you ğŸ¤—'},{src:'IMG_2077.jpeg',cap:'Home is with you ğŸ¡'},
  {src:'IMG_1400.jpeg',cap:'My whole world ğŸŒ'},{src:'IMG_5133.jpeg',cap:'Every moment counts ğŸ’«'},
  {src:'IMG_0932.jpeg',cap:"You're my sunshine â˜€ï¸"},
];
let lbIdx=0;
function openLB(i){lbIdx=i;updLB();document.getElementById('lb').classList.add('open');document.body.style.overflow='hidden';}
function updLB(){const p=photos[lbIdx];document.getElementById('lb-img').src=p.src;document.getElementById('lb-cap').textContent=p.cap;document.getElementById('lb-cnt').textContent=`${lbIdx+1} of ${photos.length}`;}
function navLB(d){lbIdx=(lbIdx+d+photos.length)%photos.length;updLB();}
function closeLB(){document.getElementById('lb').classList.remove('open');document.body.style.overflow='';}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeLB();if(e.key==='ArrowRight')navLB(1);if(e.key==='ArrowLeft')navLB(-1);});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   POPUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const msgs=[
  {e:'ğŸ’–',t:'You are my favorite person in the entire universe â€” today, tomorrow, always.'},
  {e:'ğŸŒ¹',t:'Loving you is the single best thing that has ever happened to me.'},
  {e:'ğŸ’•',t:"You make every ordinary moment feel like Valentine's Day."},
  {e:'âœ¨',t:"With you, every breath is an adventure I never want to end."},
  {e:'ğŸ’‹',t:'You are my today, my tomorrow, and every day in between.'},
  {e:'ğŸ’',t:'I fell in love with you, and I keep falling deeper every single day.'},
  {e:'ğŸ¥°',t:"You're not just my boyfriend â€” you're my home, my peace, my everything."},
  {e:'ğŸŒŸ',t:'Thank you for being the reason I smile, always and unconditionally.'},
];
let lastI=-1;
function showMsg(){
  let i;do{i=Math.floor(Math.random()*msgs.length);}while(i===lastI);
  lastI=i;
  document.getElementById('pop-em').textContent=msgs[i].e;
  document.getElementById('pop-txt').textContent=msgs[i].t;
  document.getElementById('popup').classList.add('open');
  burst(window.innerWidth/2,window.innerHeight/3,28);
}
function closeMsg(){document.getElementById('popup').classList.remove('open');}
</script>
</body>
</html>
